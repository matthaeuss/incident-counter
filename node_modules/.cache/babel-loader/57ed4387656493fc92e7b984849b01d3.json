{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useReducer, useState } from \"react\";\nimport { fetchReducer } from \"../fetchReducer\";\nimport { FETCHING, RESPONSE_COMPLETE } from \"../actionTypes\";\n\nconst useFetch = function (url) {\n  _s();\n\n  let formatData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : data => data;\n  const [state, dispatch] = useReducer(fetchReducer, []); // const[response, setResponse] = useState(null);\n  // const[loading, setLoading] = useState(true);\n  // const[error, setError] = useState(null)\n\n  const doRequest = async () => {\n    console.log('Fetching');\n    dispatch({\n      type: FETCHING\n    });\n    const responseData = await fetch(url);\n    const data = await responseData.json();\n    dispatch({\n      type: RESPONSE_COMPLETE,\n      payload: {\n        result: formatData(data)\n      }\n    });\n  };\n\n  useEffect(() => {\n    doRequest().catch(error => {\n      dispatch({\n        type: ERROR,\n        payload: {\n          error\n        }\n      });\n    }).finally(() => {\n      setLoading(false);\n    }); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [url, formatData]);\n  return [response, loading, error];\n};\n\n_s(useFetch, \"8u/JqpRC/mF6XFjbMf7O0gRQXow=\");\n\nexport default useFetch;","map":{"version":3,"names":["useEffect","useReducer","useState","fetchReducer","FETCHING","RESPONSE_COMPLETE","useFetch","url","formatData","data","state","dispatch","doRequest","console","log","type","responseData","fetch","json","payload","result","catch","error","ERROR","finally","setLoading","response","loading"],"sources":["/home/matt/Dokumenty/repositories/star-wars/src/hooks/useFetch.js"],"sourcesContent":["import {useEffect, useReducer, useState} from \"react\";\nimport {fetchReducer} from \"../fetchReducer\";\nimport {FETCHING, RESPONSE_COMPLETE} from \"../actionTypes\";\n\nconst useFetch = (url, formatData = (data) => data) => {\n    const [state, dispatch] = useReducer(fetchReducer, []);\n\n\n\n    // const[response, setResponse] = useState(null);\n    // const[loading, setLoading] = useState(true);\n    // const[error, setError] = useState(null)\n\n    const doRequest = async () => {\n        console.log('Fetching');\n\n        dispatch({type: FETCHING});\n\n\n        const responseData = await fetch(url)\n        const data = await responseData.json()\n        dispatch({\n            type: RESPONSE_COMPLETE,\n            payload: {\n                result: formatData(data)\n            }\n        })\n    }\n\n    useEffect(() => {\n        doRequest()\n            .catch((error) => {\n                dispatch({\n                    type: ERROR,\n                    payload: {error}\n                })\n            }).finally(() => {\n                setLoading(false);\n            })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [url, formatData])\n\n    return[response, loading, error]\n}\n\nexport default useFetch;"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,UAAnB,EAA+BC,QAA/B,QAA8C,OAA9C;AACA,SAAQC,YAAR,QAA2B,iBAA3B;AACA,SAAQC,QAAR,EAAkBC,iBAAlB,QAA0C,gBAA1C;;AAEA,MAAMC,QAAQ,GAAG,UAACC,GAAD,EAAsC;EAAA;;EAAA,IAAhCC,UAAgC,uEAAlBC,IAAD,IAAUA,IAAS;EACnD,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,UAAU,CAACE,YAAD,EAAe,EAAf,CAApC,CADmD,CAKnD;EACA;EACA;;EAEA,MAAMS,SAAS,GAAG,YAAY;IAC1BC,OAAO,CAACC,GAAR,CAAY,UAAZ;IAEAH,QAAQ,CAAC;MAACI,IAAI,EAAEX;IAAP,CAAD,CAAR;IAGA,MAAMY,YAAY,GAAG,MAAMC,KAAK,CAACV,GAAD,CAAhC;IACA,MAAME,IAAI,GAAG,MAAMO,YAAY,CAACE,IAAb,EAAnB;IACAP,QAAQ,CAAC;MACLI,IAAI,EAAEV,iBADD;MAELc,OAAO,EAAE;QACLC,MAAM,EAAEZ,UAAU,CAACC,IAAD;MADb;IAFJ,CAAD,CAAR;EAMH,CAdD;;EAgBAT,SAAS,CAAC,MAAM;IACZY,SAAS,GACJS,KADL,CACYC,KAAD,IAAW;MACdX,QAAQ,CAAC;QACLI,IAAI,EAAEQ,KADD;QAELJ,OAAO,EAAE;UAACG;QAAD;MAFJ,CAAD,CAAR;IAIH,CANL,EAMOE,OANP,CAMe,MAAM;MACbC,UAAU,CAAC,KAAD,CAAV;IACH,CARL,EADY,CAUhB;EACC,CAXQ,EAWN,CAAClB,GAAD,EAAMC,UAAN,CAXM,CAAT;EAaA,OAAM,CAACkB,QAAD,EAAWC,OAAX,EAAoBL,KAApB,CAAN;AACH,CAvCD;;GAAMhB,Q;;AAyCN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}